(function(a){function z(){var b=a("<div/>").addClass("scale"),e=a("<div/>").css({zIndex:1,width:160,height:160}),g=a("<span/>").css({position:"absolute",zIndex:3}),h=g.clone().addClass("outline").css({zIndex:2}),c=a("<span/>").addClass("handle");e.add(c).css({position:"absolute",top:0,left:0});k=a("<div/>").addClass("hslCircleColorPicker").css({position:"relative",width:160,height:185});k.append(b.clone().addClass("h").data("arrayIndex",0).addClass("hSprite").css({width:160,height:160}).append(e.clone().addClass("hSprite").css({backgroundPosition:"-320px 0"})).append(e.clone().addClass("hSprite").css({backgroundPosition:"-160px 0"})));
b.css({overflow:"hidden"});e.css({backgroundRepeat:"repeat-x",width:20,height:100});k.append(b.clone().addClass("s").data("arrayIndex",1).css({width:20,height:100,position:"absolute",top:30,left:70}).append(e.clone().addClass("sSprite").css({backgroundPosition:"0 -200px"})).append(e.clone().addClass("sSprite")).append(e.clone().addClass("sSprite").css({backgroundPosition:"0 -100px"})));k.append(b.clone().addClass("l").data("arrayIndex",2).css({height:20,position:"absolute",top:165,left:0,right:0}));
p.append(k);o=k.children("div");o.each(function(n){var d=a(this);if(n==0){d.append(c.clone().append(g.clone().text("+")).append(h.clone().text("+")));d.children("span").children().each(function(){var f=a(this);f.css({top:-f.height()/2,left:-f.width()/2})})}else if(n==1){d.append(c.clone().append(g.clone().text("\u25b6")).append(g.clone().text("\u25c0")).append(h.clone().text("\u25b6")).append(h.clone().text("\u25c0")));d.children("span").css({right:2}).children().each(function(f){var m=a(this);leftOrRight=
"left";if(f%2!=0)leftOrRight="right";m.css({top:-m.height()/2}).css(leftOrRight,-m.width()/2)})}else if(n==2){d.append(c.clone().append(g.clone().text("\u25bc")).append(g.clone().text("\u25b2")).append(h.clone().text("\u25bc")).append(h.clone().text("\u25b2")));d.children("span").css({bottom:2}).children().each(function(f){var m=a(this);topOrBottom="top";if(f%2!=0)topOrBottom="bottom";m.css({left:-m.width()/2-1}).css(topOrBottom,-m.height()/2)})}});i=[Math.random()*360,Math.random()*100,Math.random()*
100];v=false;r=s=t=null;o.mousedown(A)}function A(b){function e(d){var f=100;if(n==0){d=Math.atan2(d.pageX-c.left,c.top-d.pageY)/6.28;if(d<0)d+=1;f=360}else d=n==1?(100-(d.pageY-c.top))/100:(d.pageX-c.left)/160;d=d>1?1:d<0?0:d;i[n]=d*f;x();a.isFunction(s)&&s(a.colors(i,"array1Circle2Percentage","HSL"));return false}function g(){a.isFunction(t)&&t(a.colors(i,"array1Circle2Percentage","HSL"));a(document).unbind("mousemove",e).unbind("mouseup",g);k.data("dragging",false)}var h=a(b.currentTarget),c=h.offset(),
n=h.data("arrayIndex");if(n==0){c.top+=80;c.left+=80}w(a(this).closest(".hslCircleColorPicker").parent());if(v)return true;a.isFunction(r)&&r(a.colors(i,"array1Circle2Percentage","HSL"));if(!k.data("dragging")){a(document).bind("mousemove",e).bind("mouseup",g);k.data("dragging",true)}e(b);return false}function x(){var b,e;o.each(function(){var h=a(this),c=h.data("arrayIndex");h=h.children("span");if(c==0){c=i[c]/360*6.28;h.css({top:-Math.cos(c)*70+80,left:Math.sin(c)*70+80})}else c==1?h.css({top:98-
i[c]*100/100}):h.css({left:i[c]*160/100})});var g=i[2]/100;e=(100-i[1])/100;b=[g*e,(1-g)*e];if(i[2]>50){e=(i[2]-50)*2/100;b[0]=Math.max(b[0],e)}else{e=(50-i[2])*2/100;b[1]=Math.max(b[1],e)}o.filter(".h").children("div").each(function(h){a(this).css("opacity",b[h])});b=i[2]>50?[e,1-e,0]:[0,1-e,e];o.filter(".s").css({backgroundColor:a.colors([i[0],100,50],"array1Circle2Percentage","HSL").toString("rgb")}).children("div").each(function(h){a(this).css("opacity",b[h])});o.filter(".l").css({backgroundColor:a.colors([i[0],
i[1],50],"array1Circle2Percentage","HSL").toString("rgb")})}function w(b){p=b;if(p.data("hslCircleColorPickerId")){k=p.children();o=k.children("div.scale");j=p.data("hslCircleColorPickerId");i=l[j].hsl;v=l[j].disabled;r=l[j].onStartChange;s=l[j].onChange;t=l[j].onEndChange}else{j=(new Date).getTime();p.data("hslCircleColorPickerId",j);z();l[j]={hsl:i,disabled:v,onStartChange:r,onChange:s,onEndChange:t}}}function B(){function b(e){var g,h,c,n,d=[[".hslCircleColorPicker",["display","inline-block"]],
[".hslCircleColorPicker>div.scale",["border","1px solid #888"],["cursor","crosshair"]],[".hslCircleColorPicker>div.scale.h",["border-width","0 !important"]],[".hslCircleColorPicker>div.scale.s",["cursor","NS-resize"],["cursor","row-resize"]],[".hslCircleColorPicker>div.scale.l",["cursor","EW-resize"],["cursor","col-resize"]],[".hslCircleColorPicker>div.scale>span.handle>span",["color","#eee"],["font-size","16px"]],[".hslCircleColorPicker>div.scale>span.handle>span.outline",["color","#333"],["font-size",
"18px"]],[".hslCircleColorPicker.disabled>div.scale",["cursor","default"]],[".hslCircleColorPicker.disabled>div.scale>span.handle>span",["opacity","0.5"],["filter","alpha(opacity=50)"]]],f,m,q=document.getElementsByTagName("link");if(q.length==0)q=document.getElementsByTagName("style");if(e===true||this.width!=1||this.height!=1)d=d.concat([[".hslCircleColorPicker .hSprite",["background-image","url('"+a.colors.pickers.hslCircle.pathToImages+"jquery.colors.pickers.hslCircle.sprite.h.png')"]],[".hslCircleColorPicker .sSprite",
["background-image","url('"+a.colors.pickers.hslCircle.pathToImages+"jquery.colors.pickers.hslCircle.sprite.s.png')"]],[".hslCircleColorPicker>div.scale.l",["background-image","url('"+a.colors.pickers.hslCircle.pathToImages+"jquery.colors.pickers.hslCircle.l.png')"]]]);else{f=document.createElement("link");f.type="text/css";f.charset="utf-8";f.rel="stylesheet";f.href=a.colors.pickers.hslCircle.pathToImages+"jquery.colors.pickers.hslCircle.css";q.length!=0?document.getElementsByTagName("head")[0].insertBefore(f,
q[0]):document.getElementsByTagName("head")[0].appendChild(f)}f=document.createElement("style");f.type="text/css";f.charset="utf-8";f.rel="stylesheet";g=0;for(h=d.length;g<h;g++){m=[d[g][0],"{"];c=1;for(n=d[g].length;c<n;c++)m.push(d[g][c].join(":"),";");m.push("}");d[g]=m.join("")}d=d.join("");q.length!=0?document.getElementsByTagName("head")[0].insertBefore(f,q[0]):document.getElementsByTagName("head")[0].appendChild(f);if(f.styleSheet)f.styleSheet.cssText=d;else a(f).text(d);e!==true&&a(this).remove()}
y=true;/MSIE/.test(navigator.appVersion)?b(true):a("<img/>").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==").one("error load",b).appendTo("body")}var y,l={},i,v,r,s,t,p,k,o,j;a.fn.hslCircleColorPicker=function(b){var e,g=[];if(typeof b=="string"&&this.data("hslCircleColorPickerId"))return b==="color"?a.colors(l[this.data("hslCircleColorPickerId")].hsl,"array1Circle2Percentage","HSL"):l[this.data("hslCircleColorPickerId")][b];y||B();e=this.each(function(){w(a(this));
if(typeof b=="object"){var h=a.colors.models.HSL.parameterIndexes,c;for(c in b){if(c in h){l[j].hsl[h[c]]=b[c];delete b[c]}if(c==="color"){if(b[c]instanceof a.colors===false)b[c]=a.colors(b[c]);l[j].hsl=b[c].model("HSL").format("array1Circle2Percentage");delete b[c]}}a.extend(l[j],b);l[j].hsl=a.colors.models.HSL.sanitize(l[j].hsl).slice(0,3);w(p);if("disabled"in b)b.disabled?k.addClass("disabled"):k.removeClass("disabled")}else b==="hsl"&&g.push(i);x()});return g.length>1?g:g.length==1?g[0]:e};if(a.colors.pickers===
undefined)a.colors.pickers={};var u=a("script");u=u.eq(u.length-1).attr("src").split("/");u.pop();a.colors.pickers.hslCircle={pathToImages:u.join("/")+"/"}})(jQuery);
